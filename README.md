# ThatBuddy JSApp

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∏—Ç–æ–º—Ü–∞–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ React (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥) –∏ ASP.NET Core (–±—ç–∫–µ–Ω–¥).

## üèóÔ∏è –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞

–î–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É—è —Å–∫—Ä–∏–ø—Ç—ã
```bash
# Linux/macOS
./build.sh

# Windows
build.bat
```

### –ü–æ—à–∞–≥–æ–≤–∞—è —Å–±–æ—Ä–∫–∞

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫–ª–∏–µ–Ω—Ç–∞
cd thatbuddy_jsapp.client
npm install
cd ..
```

#### 2. –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```bash
# –°–±–æ—Ä–∫–∞ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd thatbuddy_jsapp.client
npm run build
cd ..
```

#### 3. –°–±–æ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞
```bash
# –°–±–æ—Ä–∫–∞ .NET –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd thatbuddy_jsapp.Server
dotnet build -c Release -o publish
cd ..
```

#### 4. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤ –ø–∞–ø–∫—É —Å–µ—Ä–≤–µ—Ä–∞
cp -r thatbuddy_jsapp.client/dist thatbuddy_jsapp.Server/publish/wwwroot
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–±–æ—Ä–∫—É —á–µ—Ä–µ–∑ MSBuild. –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã:
```bash
cd thatbuddy_jsapp.Server
dotnet publish -c Release -o publish
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è:
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫–ª–∏–µ–Ω—Ç–∞
2. –°–±–æ—Ä–∫–∞ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ø–∞–ø–∫—É publish

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞

#### –ü—Ä–æ—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞ (–ø–æ—Å–ª–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏)
```bash
docker build -t thatbuddy-jsapp ./thatbuddy_jsapp.Server
```

## SSL –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –í—Ä–µ–º–µ–Ω–Ω—ã–π nginx.conf –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```nginx
events {}

http {
    server {
        listen 80;
        server_name mapmylove.ru;

        location /.well-known/acme-challenge/ {
            root /var/www/certbot;
        }

        location / {
            proxy_pass http://app:8080;
        }
    }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```bash
docker-compose run --rm certbot certonly --webroot --webroot-path=/var/www/certbot --email liretmat@gmail.com --agree-tos --no-eff-email -d mapmylove.ru
```